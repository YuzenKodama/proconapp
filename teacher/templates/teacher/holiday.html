{% extends "teacher/base.html" %}
{% load static %}

<!DOCTYPE html>
<html lang="ja">
{% block contents %}

<h1>休日設定</h1>
    </div>

    <div class="container">
        <div class="month-select">
            <label for="month">月を選択：</label>
            <select id="month" onchange="generateCalendar()">
                <option value="2024-04">2024年4月</option>
                <option value="2024-05">2024年5月</option>
                <option value="2024-06">2024年6月</option>
                <option value="2024-07">2024年7月</option>
                <option value="2024-08">2024年8月</option>
                <option value="2024-09">2024年9月</option>
                <option value="2024-10">2024年10月</option>
                <option value="2024-11">2024年11月</option>
                <option value="2024-12">2024年12月</option>
                <option value="2025-01">2025年1月</option>
                <option value="2025-02">2025年2月</option>
                <option value="2025-03">2025年3月</option>
            </select>
        </div>

        <table>
            <thead>
                <tr>
                    <th>日</th>
                    <th>曜日</th>
                    <th>時間</th>
                    <th>休み設定</th>
                </tr>
            </thead>
            <tbody id="calendarBody">
            </tbody>
        </table>

        <button class="back-button" onclick="history.back()">戻る</button>
    </div>

    <script>
        // 日本の祝日リスト（例）
        const holidays = {
            "2024-04-29": "昭和の日",
            "2024-05-03": "憲法記念日",
            "2024-05-04": "みどりの日",
            "2024-05-05": "こどもの日",
            "2024-07-15": "海の日",
            "2024-08-11": "山の日",
            "2024-09-16": "敬老の日",
            "2024-09-23": "秋分の日",
            "2024-10-14": "体育の日",
            "2024-11-03": "文化の日",
            "2024-11-23": "勤労感謝の日",
            "2025-01-01": "元日",
            "2025-01-13": "成人の日",
            "2025-02-11": "建国記念の日",
            "2025-03-20": "春分の日"
        };

        function generateCalendar() {
            const monthSelect = document.getElementById("month").value.split("-");
            const year = parseInt(monthSelect[0]);
            const month = parseInt(monthSelect[1]);
            const calendarBody = document.getElementById("calendarBody");

            // 選択された月の最初の日と最後の日を取得
            const firstDay = new Date(year, month - 1, 1);
            const lastDay = new Date(year, month, 0);

            // 曜日の配列
            const daysOfWeek = ['日', '月', '火', '水', '木', '金', '土'];

            // カレンダーをクリア
            calendarBody.innerHTML = "";

            // 選択された月の日数分テーブルを生成
            for (let day = 1; day <= lastDay.getDate(); day++) {
                const date = new Date(year, month - 1, day);
                const row = document.createElement("tr");

                // 日付
                const dayCell = document.createElement("td");
                dayCell.textContent = day;
                row.appendChild(dayCell);

                // 曜日
                const dayOfWeekCell = document.createElement("td");
                dayOfWeekCell.textContent = daysOfWeek[date.getDay()];
                row.appendChild(dayOfWeekCell);

                // 時間（仮の固定値）
                const timeCell = document.createElement("td");
                timeCell.textContent = "09:15~15:10";
                row.appendChild(timeCell);

                // 休み設定スイッチ
                const switchCell = document.createElement("td");
                const label = document.createElement("label");
                label.classList.add("switch");

                const input = document.createElement("input");
                input.type = "checkbox";

                // 土日または祝日は自動的にチェック
                if (date.getDay() === 0 || date.getDay() === 6 || holidays[`${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`]) {
                    input.checked = true;
                }

                const slider = document.createElement("span");
                slider.classList.add("slider");

                label.appendChild(input);
                label.appendChild(slider);
                switchCell.appendChild(label);
                row.appendChild(switchCell);

                calendarBody.appendChild(row);
            }
        }

        // 初期表示
        window.onload = generateCalendar;
    </script>
{% endblock %}
</body>
</html>
